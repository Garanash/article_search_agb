<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –ø—Ä–µ—Å–µ—Ç–æ–≤ ChatBot</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .button {
            background: #1890ff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        .button:hover {
            background: #40a9ff;
        }
        .button:disabled {
            background: #d9d9d9;
            cursor: not-allowed;
        }
        .log {
            background: #f5f5f5;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            font-family: monospace;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <h1>üîß –¢–µ—Å—Ç –ø—Ä–µ—Å–µ—Ç–æ–≤ ChatBot</h1>
    
    <div class="test-section">
        <h3>üìã –ü—Ä–æ–≤–µ—Ä–∫–∞ localStorage</h3>
        <button class="button" onclick="checkLocalStorage()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å localStorage</button>
        <button class="button" onclick="clearLocalStorage()">–û—á–∏—Å—Ç–∏—Ç—å localStorage</button>
        <div id="localStorage-log" class="log"></div>
    </div>
    
    <div class="test-section">
        <h3>üîß –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–µ—Å–µ—Ç–æ–≤</h3>
        <button class="button" onclick="createPresets()">–°–æ–∑–¥–∞—Ç—å –ø—Ä–µ—Å–µ—Ç—ã</button>
        <button class="button" onclick="loadPresets()">–ó–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–µ—Å–µ—Ç—ã</button>
        <div id="presets-log" class="log"></div>
    </div>
    
    <div class="test-section">
        <h3>üéØ –¢–µ—Å—Ç –∫–Ω–æ–ø–æ–∫ –ø—Ä–µ—Å–µ—Ç–æ–≤</h3>
        <button class="button" onclick="testPresetButton('–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç–µ–ª—å –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ –∫–∞—Ä—Ç–∏–Ω–æ–∫')">–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç–µ–ª—å</button>
        <button class="button" onclick="testPresetButton('–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π DALL-E')">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</button>
        <button class="button" onclick="testPresetButton('–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ Whisper')">–†–µ—á—å</button>
        <button class="button" onclick="testPresetButton('–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –≤–∏–¥–µ–æ Kling')">–í–∏–¥–µ–æ</button>
        <button class="button" onclick="testPresetButton('–ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ —Ç–µ–∫—Å—Ç')">–î–æ–∫—É–º–µ–Ω—Ç—ã</button>
        <div id="button-test-log" class="log"></div>
    </div>

    <script>
        function log(elementId, message) {
            const element = document.getElementById(elementId);
            const timestamp = new Date().toLocaleTimeString();
            element.textContent += `[${timestamp}] ${message}\n`;
            element.scrollTop = element.scrollHeight;
        }

        function checkLocalStorage() {
            const logElement = 'localStorage-log';
            log(logElement, 'üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ localStorage...');
            
            const dialogs = localStorage.getItem('chat_dialogs');
            const folders = localStorage.getItem('chat_folders');
            const presets = localStorage.getItem('chat_presets');
            
            log(logElement, `–î–∏–∞–ª–æ–≥–∏: ${dialogs ? '‚úÖ –ï—Å—Ç—å' : '‚ùå –ù–µ—Ç'}`);
            log(logElement, `–ü–∞–ø–∫–∏: ${folders ? '‚úÖ –ï—Å—Ç—å' : '‚ùå –ù–µ—Ç'}`);
            log(logElement, `–ü—Ä–µ—Å–µ—Ç—ã: ${presets ? '‚úÖ –ï—Å—Ç—å' : '‚ùå –ù–µ—Ç'}`);
            
            if (presets) {
                try {
                    const parsedPresets = JSON.parse(presets);
                    log(logElement, `–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–µ—Å–µ—Ç–æ–≤: ${parsedPresets.length}`);
                    parsedPresets.forEach((preset, index) => {
                        log(logElement, `  ${index + 1}. ${preset.name} (${preset.model})`);
                    });
                } catch (e) {
                    log(logElement, `‚ùå –û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –ø—Ä–µ—Å–µ—Ç–æ–≤: ${e.message}`);
                }
            }
        }

        function clearLocalStorage() {
            const logElement = 'localStorage-log';
            log(logElement, 'üóëÔ∏è –û—á–∏—Å—Ç–∫–∞ localStorage...');
            
            localStorage.removeItem('chat_dialogs');
            localStorage.removeItem('chat_folders');
            localStorage.removeItem('chat_presets');
            
            log(logElement, '‚úÖ localStorage –æ—á–∏—â–µ–Ω');
        }

        function createPresets() {
            const logElement = 'presets-log';
            log(logElement, 'üîß –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –ø—Ä–µ—Å–µ—Ç–æ–≤...');
            
            const defaultPresets = [
                {
                    id: '1',
                    name: '–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç–µ–ª—å –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ –∫–∞—Ä—Ç–∏–Ω–æ–∫',
                    model: 'vis-google/gemini-flash-1.5',
                    temperature: 0.3,
                    maxTokens: 2000,
                    systemPrompt: '–¢—ã - —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π...',
                    createdAt: new Date().toISOString()
                },
                {
                    id: '2',
                    name: '–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π DALL-E',
                    model: 'dall-e-3',
                    temperature: 0.7,
                    maxTokens: 1000,
                    systemPrompt: '–¢—ã - —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π...',
                    createdAt: new Date().toISOString()
                },
                {
                    id: '3',
                    name: '–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ Whisper',
                    model: 'stt-openai/whisper-1',
                    temperature: 0.3,
                    maxTokens: 1500,
                    systemPrompt: '–¢—ã - —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞—É–¥–∏–æ...',
                    createdAt: new Date().toISOString()
                },
                {
                    id: '4',
                    name: '–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –≤–∏–¥–µ–æ Kling',
                    model: 'txt2vid-kling/standart',
                    temperature: 0.7,
                    maxTokens: 2000,
                    systemPrompt: '–¢—ã - —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–∏–¥–µ–æ...',
                    createdAt: new Date().toISOString()
                },
                {
                    id: '5',
                    name: '–ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ —Ç–µ–∫—Å—Ç',
                    model: 'utils/extract-text-1.0',
                    temperature: 0.3,
                    maxTokens: 3000,
                    systemPrompt: '–¢—ã - —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤...',
                    createdAt: new Date().toISOString()
                }
            ];
            
            localStorage.setItem('chat_presets', JSON.stringify(defaultPresets));
            log(logElement, `‚úÖ –°–æ–∑–¥–∞–Ω–æ ${defaultPresets.length} –ø—Ä–µ—Å–µ—Ç–æ–≤`);
            defaultPresets.forEach(preset => {
                log(logElement, `  - ${preset.name} (${preset.model})`);
            });
        }

        function loadPresets() {
            const logElement = 'presets-log';
            log(logElement, 'üì• –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ—Å–µ—Ç–æ–≤ –∏–∑ localStorage...');
            
            const storedPresets = localStorage.getItem('chat_presets');
            if (storedPresets) {
                try {
                    const presets = JSON.parse(storedPresets);
                    log(logElement, `‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ ${presets.length} –ø—Ä–µ—Å–µ—Ç–æ–≤`);
                    presets.forEach(preset => {
                        log(logElement, `  - ${preset.name} (${preset.model})`);
                    });
                } catch (e) {
                    log(logElement, `‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–µ—Å–µ—Ç–æ–≤: ${e.message}`);
                }
            } else {
                log(logElement, '‚ùå –ü—Ä–µ—Å–µ—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –≤ localStorage');
            }
        }

        function testPresetButton(presetName) {
            const logElement = 'button-test-log';
            log(logElement, `üéØ –¢–µ—Å—Ç –∫–Ω–æ–ø–∫–∏ –ø—Ä–µ—Å–µ—Ç–∞: "${presetName}"`);
            
            const storedPresets = localStorage.getItem('chat_presets');
            if (!storedPresets) {
                log(logElement, '‚ùå –ü—Ä–µ—Å–µ—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –≤ localStorage');
                return;
            }
            
            try {
                const presets = JSON.parse(storedPresets);
                const preset = presets.find(p => p.name === presetName);
                
                if (preset) {
                    log(logElement, `‚úÖ –ü—Ä–µ—Å–µ—Ç –Ω–∞–π–¥–µ–Ω: ${preset.name}`);
                    log(logElement, `  –ú–æ–¥–µ–ª—å: ${preset.model}`);
                    log(logElement, `  Temperature: ${preset.temperature}`);
                    log(logElement, `  MaxTokens: ${preset.maxTokens}`);
                    log(logElement, `  SystemPrompt: ${preset.systemPrompt ? '–ï—Å—Ç—å' : '–ù–µ—Ç'}`);
                } else {
                    log(logElement, `‚ùå –ü—Ä–µ—Å–µ—Ç "${presetName}" –Ω–µ –Ω–∞–π–¥–µ–Ω`);
                    log(logElement, `–î–æ—Å—Ç—É–ø–Ω—ã–µ –ø—Ä–µ—Å–µ—Ç—ã:`);
                    presets.forEach(p => {
                        log(logElement, `  - ${p.name}`);
                    });
                }
            } catch (e) {
                log(logElement, `‚ùå –û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞ –ø—Ä–µ—Å–µ—Ç–∞: ${e.message}`);
            }
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = function() {
            log('localStorage-log', 'üöÄ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞...');
            checkLocalStorage();
        };
    </script>
</body>
</html> 