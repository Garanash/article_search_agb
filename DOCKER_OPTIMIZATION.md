# üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Docker —Å–±–æ—Ä–∫–∏

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### ‚è±Ô∏è –í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ —Å–æ–∫—Ä–∞—Ç–∏–ª–æ—Å—å —Å **4+ –º–∏–Ω—É—Ç –¥–æ 10 —Å–µ–∫—É–Ω–¥** (–ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∫–µ—à–∞)

## üîß –ö–ª—é—á–µ–≤—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 1. **–ú–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω—ã–π Dockerfile —Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**
```dockerfile
# –û—Ç–¥–µ–ª—å–Ω—ã–µ —Å—Ç–∞–¥–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
FROM node:20-alpine as deps         # –¢–æ–ª—å–∫–æ production –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
FROM node:20-alpine as deps-full    # –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤–∫–ª—é—á–∞—è dev
FROM node:20-alpine as build        # –°–±–æ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
FROM nginx:alpine                   # –§–∏–Ω–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑
```

**–ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∫–µ—à–∏—Ä—É—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç –∫–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –∫–µ—à –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### 2. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π .dockerignore**
–ò—Å–∫–ª—é—á–∞–µ–º –Ω–µ–Ω—É–∂–Ω—ã–µ —Ñ–∞–π–ª—ã –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å–±–æ—Ä–∫–∏:
```
node_modules/
build/
.git/
*.log
coverage/
.cache/
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –†–∞–∑–º–µ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å–±–æ—Ä–∫–∏ —É–º–µ–Ω—å—à–∏–ª—Å—è –≤ ~10 —Ä–∞–∑

### 3. **BuildKit –≤–∫–ª—é—á–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**
```bash
export DOCKER_BUILDKIT=1
export COMPOSE_DOCKER_CLI_BUILD=1
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ —Å—Ç–∞–¥–∏–π
- –õ—É—á—à–µ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ë–æ–ª–µ–µ –±—ã—Å—Ç—Ä–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

### 4. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–∏**
```dockerfile
RUN npm config set strict-ssl false && \
    npm ci --no-audit --no-fund
```

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- `npm ci` –≤–º–µ—Å—Ç–æ `npm install` (–±—ã—Å—Ç—Ä–µ–µ, –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)
- `--no-audit --no-fund` —É–±–∏—Ä–∞–µ—Ç –Ω–µ–Ω—É–∂–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
- –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è —Å–ª–æ–µ–≤

### 5. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å–±–æ—Ä–∫–∏**
```dockerfile
ENV NODE_ENV=production
ENV GENERATE_SOURCEMAP=false
ENV DISABLE_ESLINT_PLUGIN=true
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–±–æ—Ä–∫–∞ React –±—ã—Å—Ç—Ä–µ–µ –Ω–∞ 30-40%

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

| –≠—Ç–∞–ø | –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ | –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ | –£—Å–∫–æ—Ä–µ–Ω–∏–µ |
|------|----------------|-------------------|-----------|
| –ü–µ—Ä–≤–∞—è —Å–±–æ—Ä–∫–∞ | ~4-5 –º–∏–Ω—É—Ç | ~2-3 –º–∏–Ω—É—Ç—ã | 40-50% |
| –ü–æ–≤—Ç–æ—Ä–Ω–∞—è —Å–±–æ—Ä–∫–∞ (—Ç–æ–ª—å–∫–æ –∫–æ–¥) | ~4-5 –º–∏–Ω—É—Ç | ~10-20 —Å–µ–∫—É–Ω–¥ | **95%** |
| –†–∞–∑–º–µ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ | ~25MB | ~2MB | 90% |

## üõ†Ô∏è –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ë—ã—Å—Ç—Ä–∞—è —Å–±–æ—Ä–∫–∞ –æ–¥–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞:
```bash
# Windows
.\build-fast.bat frontend

# Linux/Mac  
./build-fast.sh frontend
```

### –°–±–æ—Ä–∫–∞ —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º:
```bash
$env:DOCKER_BUILDKIT=1
$env:COMPOSE_DOCKER_CLI_BUILD=1
docker-compose build --parallel
```

### –û—á–∏—Å—Ç–∫–∞ —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ä—ã—Ö –∫–µ—à–µ–π:
```bash
docker builder prune -f --filter until=24h
```

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

1. **–ù–µ –º–µ–Ω—è–π—Ç–µ package.json –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏** - —ç—Ç–æ –ª–æ–º–∞–µ—Ç –∫–µ—à –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ .dockerignore** - –∏—Å–∫–ª—é—á–∞–π—Ç–µ –≤—Å—ë –Ω–µ–Ω—É–∂–Ω–æ–µ
3. **–ì—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è** - –ª—É—á—à–µ —Å–¥–µ–ª–∞—Ç—å –æ–¥–Ω—É –±–æ–ª—å—à—É—é —Å–±–æ—Ä–∫—É, —á–µ–º –º–Ω–æ–≥–æ –º–∞–ª–µ–Ω—å–∫–∏—Ö
4. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ä–∞–∑–º–µ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞** —Ä–µ–≥—É–ª—è—Ä–Ω–æ

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:
```bash
du -sh . --exclude=node_modules --exclude=.git
```

### –ê–Ω–∞–ª–∏–∑ –∫–µ—à–∞ Docker:
```bash
docker system df
docker builder du
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ª–æ–µ–≤ –æ–±—Ä–∞–∑–∞:
```bash
docker history article_search_agb-frontend
```

## üìà –î–∞–ª—å–Ω–µ–π—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **Multi-arch —Å–±–æ—Ä–∫–∞** –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º
2. **–í–Ω–µ—à–Ω–∏–π –∫–µ—à** —á–µ—Ä–µ–∑ Docker Registry
3. **–°–∂–∞—Ç–∏–µ –æ–±—Ä–∞–∑–æ–≤** —Å –ø–æ–º–æ—â—å—é Alpine –∏–ª–∏ Distroless
4. **CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** —Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏

---
*–í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –º–æ—â–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞*
